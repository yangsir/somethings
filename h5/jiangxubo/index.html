<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="UTF-8">
    <meta http-equiv="cache-control" content="no-cache">
    <meta http-equiv="expires" content="0">
    <meta name="viewport" content="width=640,minimum-scale=0.5,maximum-scale=0.5">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="black" name="apple-mobile-web-app-status-bar-style">
    <script src="js/jquery-1.10.1.min.js"></script>
    <script src="js/jquery.event.move.js"></script>
    <script src="js/jquery.event.swipe.js"></script>
    <script src="js/jquery.transit.min.js"></script>
    <script src="MobileAPI.js"></script>
    <link rel="stylesheet" href="css/main.css?t=2015725">
    <link rel="stylesheet" href="css/style.css"/>
    <!--<link rel="stylesheet" href="css/swiper.min.css">-->
    <!--<script type="text/javascript" defer="" src="js/piwik.js"></script>-->
    <!--<script src="js/wow.js"></script>-->
    <!--<script src="js/jweixin-1.0.0.js"></script>-->
    <!--<script src="js/swiper.min.js"></script>-->
    <title></title>
</head>
<body style='background:#fbf0dc;'>
<div id=makadym style=background:#fbf0dc;z-index:999;width:100%;height:100%;position:absolute;left:0px;top:0px;overflow:hidden;></div>
<img id="musiccontrolon" class="floating" src="images/musicon.png"
     style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); -webkit-user-select: none; outline: none; opacity: 0.7; width: 60px; display: none; position: absolute; right: 15px; top: 15px; z-index: 999;">
<img id="musiccontroloff" class="opacity-twinkle" src="images/musicoff.png"
     style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); outline: none; -webkit-user-select: none; width: 60px; display: none; position: absolute; right: 15px; top: 15px; z-index: 999;">
<img id="arrow" class="arrowing" src="images/arrow_w_3.png"
     style="z-index: 999; width: 60px; position: absolute; bottom: 20px; left: 50%; margin-left: -30px; display: none;">

<div id="sppage"
     style="z-index:1999;width:100%;height:100%;text-align:center;position:absolute;left:0;top:0;display:none;overflow:hidden;background: rgba(25,25,25,0.2)">
    <iframe id="sppageframe"
            style="border: 0px; outline: 0px; width: 640px; height: 1008px; position: absolute; top: 50%; left: 50%; margin: -504px 0px 0px -320px; transform: scale(1, 1);"></iframe>
</div>
<div id="preloadarea"
     style="z-index: 999; width: 100%; height: 100%; position: absolute; left: 0px; top: 0px; display: none; background: fbf0dc;"> <!--   <div style="display:none;position:absolute;background:rgba(240,240,240,1);top:12%;left:50%;margin-left:-140px;width:280px;height:3px;overflow:hidden;">
    <div id="progress" style="position:absolute;background:rgb(80, 80, 80);height:3px;left:0;top:0;"></div>
  </div>
  <div id="persent" style="text-align:center;position:absolute;color:rgb(120, 120, 120);height:40px;line-height:18px;left:0%;width:100%;top:40%;font-size:30px;font-weight:500;"></div>
   -->
    <div class="wthum"
         style="position: absolute; width: 60px; height: 60px; border-radius: 60px; left: 50%; top: 30%; margin: -30px; display: none; background: rgb(57, 187, 171);"></div>
    <div class="wthum waitthum infinite"
         style="position: absolute; width: 200px; height: 200px; border-radius: 340px; left: 50%; top: 30%; margin: -100px; display: none; background: rgba(57, 187, 171, 0.4);"></div>
    <div class="pie pie1" style="transform: rotate(180deg);"></div>
    <div class="pie pie2" style="transform: rotate(0deg); background: rgb(175, 228, 221);"></div>
    <div id="persent"
         style="margin-top:150px;text-indent:12px;position:absolute;top:31%;width:100%;left:0;color:rgb(180,180,180);font-size:24px;text-align:center">
        100%
    </div>
    <div id="covert"
         style="position: absolute; width: 200px; height: 200px; border-radius: 340px; left: 50%; top: 30%; margin: -100px; overflow: hidden;">
        <img id="cover" src="images/30x30a0a0.png" style="width: 100%; height: 100%; border-radius: 340px;"></div>
    <div id="test" class="test content">
        <div class="header-top wow flipIn" data-wow-duration="0.5s" data-wow-delay="0s">小测试
            <span class="pull-right num"><span class="cur-index">1</span>/<span class="last-index">2</span></span></div>
        <div class="body-box">
            <label class="li-title wow fadeIn_" data-wow-duration="1s">
                <span class="tihao"><span class="cur-index">1</span>. </span><span class="title">（）</span></label>
            <hr>
            <div class="pull-right badge wow fadeInRight" data-wow-duration="1s" data-wow-delay="0.3s">单选题</div>
            <ul class="list-all clear-fix">
                <!--<li name="8-0"><p class="bg"><span class="circle">A</span><span class="cont"> </span></p></li>-->
                <li name="8-0" style="display: list-item;" class="wow fadeInLeft" data-wow-duration="1s" data-wow-delay="0.9s">
                    <p class="bg"><span class="circle">A</span><span class="cont"></span>
                        <span class="feedback"></span>
                    </p></li>
                <li name="8-0" style="display: list-item;" class="wow fadeInLeft" data-wow-duration="1s" data-wow-delay="1.2s">
                    <p class="bg"><span class="circle">B</span><span class="cont"></span>
                        <span class="feedback"></span>
                    </p></li>
                <li name="8-0" style="display: list-item;" class="wow fadeInLeft" data-wow-duration="1s" data-wow-delay="1.5s">
                    <p class="bg"><span class="circle">C</span><span class="cont"></span>
                        <span class="feedback"></span>
                    </p></li>
                <li name="8-0" style="display: list-item;" class="wow fadeInLeft" data-wow-duration="1s" data-wow-delay="1.8s">
                    <p class="bg"><span class="circle">D</span><span class="cont"></span>
                        <span class="feedback"></span>
                    </p></li>
            </ul>
            <div class="btn wow fadeInUp" data-wow-duration="1s" data-wow-delay="2.5s">
                提&nbsp;&nbsp;交
            </div>

            <div class="cankaodn" style="display: none;">

                <p class="cankao">参考答案：</p>
                <span class="daan"> </span><br>
                <!--<span class="daan">C</span><br>-->
                <p class="cankao">题目解析：</p>
                <p class="jiexi">
                    <!--<p class="jiexi">如果A是答案那么混合物体的结果可能会有两种可能性，一个是血浆蛋白，第二是胆固醇，但是胆固醇不能作为物体本身，-->
                    <!--所答案是C</p>-->
                </p>
            </div>
        </div>

    </div>
</div>
<script>
    var cur = 0,isInTestPage=false;
    function onPageStart(){
    }
    function onPageEnd(mk) {
    }
    function onPageRender(mk) {
        var n = mk.current;
        var test = mk.test;
        var url = mk.data[n].bgpic;
        var ok = [];
        var $page = $(".page.pt-page-rotateCubeTopIn");
        var init = function (n){
            if(n===test.length) {
                cur=0;
                mk.start(0);
                $("#arrow").fadeIn();
                $("#test").hide().parent().parent().removeClass("active pt-page-rotateCubeTopIn pageactive").addClass("pt-page-rotateCubeTopOut");
                isInTestPage=false;
                return;
            }
            $('#arrow').fadeOut();
            var title = test[n].title;
            var ops = test[n].ops;
            ok = test[n].ok;
            cur = n;
            $('#test').find(".title").text(title);
            for (var i = 0; i < ops.length; i++) {
                $('#test').find(".cont").eq(i).text(ops[i]).off('click toutchstart').on('click touchstart',function(e){
                    if($page.find('.btn').text()!=='下一题' && $page.find('.btn').text()!=='已完成') {
                        e.stopImmediatePropagation();
                        var li = $(this).closest('li');
                        $('#test').find('.circle').removeClass('circle-bg');
                        li.find('.circle').addClass('circle-bg');
                    }
                });
            }
            $('#test').find('.cur-index').text(cur+1);
            $('#test').find('.last-index').text(test.length);
            $('#test').find(".title").text(title);
            $('#test').find('.feedback').removeClass('animated flash').removeClass('right wrong');
            $('#test').find('.cont').removeClass('animated flash').removeClass('right wrong');
            $('#test').find('.circle-bg').removeClass('circle-bg');
            $('#test').find('.btn').text('提  交');
        };

        if (url.indexOf('test.png')>=0&&!isInTestPage) {
            //console.log('page: ' + n + ' is testing......... ');
            isInTestPage=true;
            $('#test').show();
            if($page.find('.pagecontent').children().length==0) {
                $page.find('.pagecontent').append($('#test'));
            }
            cur ==0&&init(0);

            $page.find('.btn').off('click toutchstart').on('click toutchstart',function(e){
                e.stopImmediatePropagation();
                if($(this).text()!=="下一题" && $(this).text()!=="已完成") {

                    var leng = $('#test').find('.circle-bg').length;
                    if(leng != 1) return;

                    if(ok){
                        if(ok.length==1){
                            var $conts = $('#test').find(".cont");
                            for (var i = 0; i < $conts.length; i++) {
                                $conts.eq(i).closest('li').find('.feedback').removeClass('right').removeClass('wrong');
                                if (parseInt(ok[0]) === i){
                                    $('#test').find(".feedback").eq(ok[0]).addClass('animated flash right');
                                    $('#test').find(".cont").eq(ok[0]).addClass('animated flash right');
                                } else {
                                    if($conts.eq(i).closest('li').find('.circle').is('.circle-bg')) {
                                        $conts.closest('li').find('.feedback').eq(i).addClass('animated wrong');
                                        $conts.closest('li').find('.cont').eq(i).addClass('animated wrong');
                                    }
                                }
                            }

                        }
                    }
                    $(this).text("下一题");
                    if(cur===test.length-1){
                        console.log("doMobileCommit completed!!!");
                        try{
                            // 获取值
                            App.call("doMobileGetValue","cmi.core.lesson_status",function(e){ });
                            // 设置值
                            App.call("doMobileSetValue","cmi.core.lesson_status","completed",function(e){
                            });
                            App.call("doMobileCommit");
                        }catch(e){
                        }
                        $('#test').find('.btn').addClass('succss').text("已完成");
                    }
                } else {
                    init(cur+1);
                };
            });
        }

        $(".pagebg").css({ 'background-color':'#fbf0dc'});
    }
</script>
<script src="js/mk.js?t=2015725"></script>
<script src="js/main.js"></script>
</body>
</html>
